{
    "project": "AIOps Backend Refactor",
    "branchName": "ralph/langraph-refactor",
    "description": "Refactor backend to use LangGraph with Supervisor-Worker pattern for parallel execution and strict state management.",
    "userStories": [
        {
            "id": "US-001",
            "title": "Define Shared Pydantic Schemas",
            "description": "As a developer, I need strict data contracts so that agents communicate reliably.",
            "acceptanceCriteria": [
                "Create/Update `backend/src/models.py`",
                "Define `SubAgentResult` with fields: `raw_data` (dict), `summary` (str), `status` (enum)",
                "Define `OrchestratorDecision` with fields: `next_steps` (list), `reasoning` (str)",
                "Define `TriageReport` with fields: `root_cause` (str), `details` (list/str), `action` (str)",
                "Typecheck passes"
            ],
            "priority": 1,
            "passes": true,
            "notes": "Completed on 2026-01-20. Schemas defined in backend/src/models.py"
        },
        {
            "id": "US-002",
            "title": "Refactor Sub-Agents to Schema",
            "description": "As a developer, I need existing agents to return the new `SubAgentResult` format so they fit into the graph.",
            "acceptanceCriteria": [
                "Refactor Infoblox agent to return `SubAgentResult`",
                "Refactor Palo Alto agent to return `SubAgentResult`",
                "Refactor Cisco agent (if present) to return `SubAgentResult`",
                "Ensure all agents handle API errors as soft failures (Status: FAILURE)",
                "Typecheck passes"
            ],
            "priority": 2,
            "passes": true,
            "notes": "Completed on 2026-01-20. Refactored sub-agents to use `SubAgentResult`. Added `infoblox` and `palo_alto` agents."
        },
        {
            "id": "US-003",
            "title": "Implement Orchestrator Validation & Planning",
            "description": "As a system, I need an Orchestrator to validate inputs and route tasks.",
            "acceptanceCriteria": [
                "Create `Orchestrator` node using `ChatOpenAI`",
                "Implement input validation (check for IP fields)",
                "Route to Infoblox if data missing, or Sub-Agents if present",
                "Output structured `OrchestratorDecision`",
                "Typecheck passes"
            ],
            "priority": 3,
            "passes": true,
            "notes": "Completed on 2026-01-20. Orchestrator implemented with IP validation and routing logic."
        },
        {
            "id": "US-004",
            "title": "Implement Parallel Agent Execution Graph",
            "description": "As a user, I want agents to run in parallel to reduce data fetching time.",
            "acceptanceCriteria": [
                "Setup LangGraph StateGraph with `AgentState`",
                "Implement conditional edges from Orchestrator",
                "Implement parallel node execution (fan-out) for Sub-Agents",
                "Implement fan-in to collect results",
                "Typecheck passes"
            ],
            "priority": 4,
            "passes": false,
            "notes": ""
        },
        {
            "id": "US-005",
            "title": "Implement Triage Agent",
            "description": "As a user, I want a final diagnosis report based on collected data.",
            "acceptanceCriteria": [
                "Create `Triage` node that runs after Sub-Agents",
                "Feed only summaries to the LLM (hide raw data)",
                "Generate `TriageReport` with confidence score",
                "Handle partial failures gracefully",
                "Typecheck passes"
            ],
            "priority": 5,
            "passes": false,
            "notes": ""
        },
        {
            "id": "US-006",
            "title": "State Persistence and API Integration",
            "description": "As an SRE, I want results persisted and accessible via API.",
            "acceptanceCriteria": [
                "Update FastAPI endpoint to run the LangGraph graph",
                "Persist full `IncidentState` (including raw data) to database/storage",
                "Return `TriageReport` in the API response",
                "Typecheck passes",
                "Verify in browser using dev-browser skill (via frontend)"
            ],
            "priority": 6,
            "passes": false,
            "notes": ""
        }
    ]
}