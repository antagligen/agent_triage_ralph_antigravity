# Ralph Progress Log
---

## 2026-01-20T21:04 - US-001 Create Prompt File Structure
- Created `backend/system_prompts/` directory
- Created all 5 prompt files:
  - `orchestrator.txt` - Request routing instructions
  - `aci.txt` - Cisco ACI fabric diagnostics
  - `infoblox.txt` - IPAM and DNS queries
  - `palo_alto.txt` - Firewall diagnostics
  - `triage.txt` - SRE analysis instructions
- Files changed: 5 new files in `backend/system_prompts/`
- **Learnings:**
  - Sub-agents (ACI, Infoblox, Palo Alto) currently use `create_react_agent()` without explicit system prompts
  - Triage agent has hardcoded prompt in `triage.py` lines 47-54
  - Orchestrator uses `config.system_prompt` plus inline additions
---

## 2026-01-20T21:08 - US-002 Implement Prompt Loading Utility
- Added `load_system_prompt(agent_name: str) -> str` function to `backend/src/config.py`
- Uses `pathlib.Path` for cross-platform path resolution
- Added `DEFAULT_PROMPTS` dict with fallback prompts for all 5 agents
- Logs warnings when file not found, debug when successfully loaded
- Files changed: `backend/src/config.py`
- **Learnings:**
  - PowerShell doesn't support `&&` for chaining commands, use `;` or separate commands
  - `Path(__file__).resolve().parent.parent / "system_prompts"` works for Docker `/app/src` structure
---

## 2026-01-20T21:12 - US-003 Update Orchestrator to Use Configurable Prompt
- Updated `backend/src/orchestrator.py` to import and use `load_system_prompt('orchestrator')`
- Replaced `config.system_prompt` with configurable prompt loading
- Prompt is now read from `backend/system_prompts/orchestrator.txt`
- Files changed: `backend/src/orchestrator.py`
- **Learnings:**
  - The orchestrator prompt can now be hot-reloaded from the text file
  - Fallback mechanism ensures backward compatibility
---

## 2026-01-20T21:23 - US-004 Update Sub-Agents with Configurable Prompts
- Updated aci.py, infoblox.py, palo_alto.py to use load_system_prompt
- Passed system prompt to create_react_agent via state_modifier
- Validated with mypy
- Files changed: backend/src/sub_agents/aci.py, backend/src/sub_agents/infoblox.py, backend/src/sub_agents/palo_alto.py
- **Learnings:**
  - create_react_agent accepts state_modifier for system prompts
---
