# Ralph Progress Log
---
## Codebase Patterns
- One Task = One Chat Session
- Always check out the correct branch before starting work
- `load_config` is cached with `@lru_cache` to avoid I/O on every request
- Pydantic models ensure strict typing for the configuration file
- `src` needs `__init__.py` for pytest to correctly resolve imports
- Streamlit uses `st.session_state` to maintain state across reruns
- SSE streaming with `requests` requires `stream=True` and line-by-line parsing
- Docker Compose networks allow service-to-service communication by service name

## 2026-01-16 15:45 - US-001
- Extracted streaming logic to `backend/src/streaming.py`
- Refactored `backend/src/main.py`
- **Learnings:**
  - `mypy` checks are essential for refactoring safety
  - `stream_graph_events` handles SSE format directly
---

## 2026-01-16 15:52 - US-002
- Created ackend/src/schemas.py for Pydantic models
- Moved ChatRequest out of ackend/src/main.py`n- **Learnings:**
  - Keeping schemas separate improves readability of the main entrypoint
---

## 2026-01-16 15:46 - US-005
- Refactored ackend/src/main.py:
  - Moved imports to module level.
  - Defined BASE_DIR, STATIC_DIR, CONFIG_PATH constants.
  - Cleaned up get_config and chat endpoint.
  - Added startup config verification.
- **Learnings:**
  - uvicorn imports pp directly, so if __name__ == __main__:  block runs only when executing script directly.
  - curl on Windows requires careful quoting for JSON.
---
